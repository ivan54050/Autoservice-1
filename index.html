<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Міні база посилок з додатковими полями</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  form { margin-bottom: 20px; display: grid; gap: 8px; max-width: 600px; }
  input, button { padding: 8px; font-size: 1rem; }
  table { width: 100%; border-collapse: collapse; margin-top: 10px;}
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  button.delete { background: red; color: white; border: none; cursor: pointer; }
  label { font-weight: bold; }
</style>
</head>
<body>

<h1>Міні база посилок</h1>

<form id="parcelForm">
  <label>№ посилки
    <input type="text" id="parcelNumber" placeholder="№ посилки" required />
  </label>
  <label>Вага (кг)
    <input type="number" id="weight" placeholder="Вага (кг)" step="0.01" min="0" required />
  </label>
  <label>Об’ємна вага (кг)
    <input type="number" id="volumeWeight" placeholder="Об’ємна вага (кг)" step="0.01" min="0" required />
  </label>
  <label>Вартість (€)
    <input type="number" id="priceEuro" placeholder="Вартість у євро" step="0.01" min="0" required />
  </label>
  <label>Номер телефону отримувача
    <input type="tel" id="receiverPhone" placeholder="+380XXXXXXXXX" pattern="^\+?\d{7,15}$" required />
  </label>
  <label>Відділення Нової Пошти
    <input type="text" id="npBranch" placeholder="Відділення Нової Пошти" required />
  </label>
  <button type="submit">Додати посилку</button>
</form>

<table>
  <thead>
    <tr>
      <th>№ посилки</th>
      <th>Вага (кг)</th>
      <th>Об’ємна вага (кг)</th>
      <th>Вартість (€)</th>
      <th>Телефон отримувача</th>
      <th>Відділення НП</th>
      <th>Дії</th>
    </tr>
  </thead>
  <tbody id="parcelList"></tbody>
</table>

<script>
  const form = document.getElementById('parcelForm');
  const parcelList = document.getElementById('parcelList');

  let parcels = [];

  function renderTable() {
    parcelList.innerHTML = '';
    parcels.forEach((p, index) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.number}</td>
        <td>${p.weight.toFixed(2)}</td>
        <td>${p.volumeWeight.toFixed(2)}</td>
        <td>${p.priceEuro.toFixed(2)}</td>
        <td>${p.receiverPhone}</td>
        <td>${p.npBranch}</td>
        <td><button class="delete" data-index="${index}">Видалити</button></td>
      `;
      parcelList.appendChild(tr);
    });
  }

  function validatePhone(phone) {
    const phoneRegex = /^\+?\d{7,15}$/;
    return phoneRegex.test(phone);
  }

  form.addEventListener('submit', e => {
    e.preventDefault();

    const number = document.getElementById('parcelNumber').value.trim();
    const weight = parseFloat(document.getElementById('weight').value);
    const volumeWeight = parseFloat(document.getElementById('volumeWeight').value);
    const priceEuro = parseFloat(document.getElementById('priceEuro').value);
    const receiverPhone = document.getElementById('receiverPhone').value.trim();
    const npBranch = document.getElementById('npBranch').value.trim();

    if (!validatePhone(receiverPhone)) {
      alert('Введіть коректний номер телефону у форматі +380XXXXXXXXX');
      return;
    }

    if(!number || isNaN(weight) || isNaN(volumeWeight) || isNaN(priceEuro) || !npBranch) {
      alert('Заповніть усі поля коректно!');
      return;
    }

    parcels.push({ number, weight, volumeWeight, priceEuro, receiverPhone, npBranch });
    renderTable();
    form.reset();
  });

  parcelList.addEventListener('click', e => {
    if (e.target.classList.contains('delete')) {
      const index = e.target.getAttribute('data-index');
      parcels.splice(index, 1);
      renderTable();
    }
  });

  renderTable();
</script>

</body>
</html>