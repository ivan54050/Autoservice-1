    // Пошук по таблиці
    searchInput.addEventListener('input', () => {
      renderTable(searchInput.value);
    });

    // Генерація PDF для однієї посилки
    function generatePdfSingle(parcel) {
      const doc = new jsPDF();
      doc.setFontSize(14);
      doc.text(`Інформація про посилку №${parcel.number}`, 14, 20);
      const rows = [
        ['№ посилки', parcel.number],
        ['Вага (кг)', parcel.weight.toFixed(2)],
        ['Кількість місць', parcel.placesCount],
        ['Об’ємна вага (кг)', parcel.volumeWeight.toFixed(2)],
        ['Відділення НП', parcel.npBranch],
        ['Телефон', parcel.receiverPhone],
        ['Місто', parcel.city],
        ['Опис', parcel.description || ''],
        ['Ціна (€)', parcel.priceEuro.toFixed(2)],
        ['Дата створення', new Date(parcel.createdAt).toLocaleString()]
      ];
      doc.autoTable({
        startY: 30,
        head: [['Поле', 'Значення']],
        body: rows,
        styles: { cellPadding: 3, fontSize: 12 }
      });
      doc.save(`posylka_${parcel.number}.pdf`);
    }

    // Генерація PDF для всіх посилок
    document.getElementById('exportPdfAll').addEventListener('click', () => {
      if (parcels.length === 0) {
        alert('Немає посилок для експорту.');
        return;
      }
      const doc = new jsPDF();
      doc.setFontSize(16);
      doc.text('Список усіх посилок', 14, 20);

      const body = parcels.map(p => [
        p.number,
        p.weight.toFixed(2),
        p.placesCount,
        p.volumeWeight.toFixed(2),
        p.npBranch,
        p.receiverPhone,
        p.city,
        p.description || '',
        p.priceEuro.toFixed(2),
        new Date(p.createdAt).toLocaleString()
      ]);
      doc.autoTable({
        startY: 30,
        head: [['№ посилки', 'Вага (кг)', 'Місць', 'Об’ємна вага (кг)', 'Відділення НП', 'Телефон', 'Місто', 'Опис', 'Ціна (€)', 'Дата створення']],
        body,
        styles: { fontSize: 8, cellPadding: 2 },
        headStyles: { fillColor: [0, 0, 0], textColor: 255 }
      });
      doc.save('vsi_posylky.pdf');
    });

    // Тема: світла / темна
    function applyTheme(theme) {
      if (theme === 'dark') {
        document.body.classList.add('dark');
        themeToggleBtn.setAttribute('aria-pressed', 'true');
      } else {
        document.body.classList.remove('dark');
        themeToggleBtn.setAttribute('aria-pressed', 'false');
      }
      localStorage.setItem('theme', theme);
    }
    themeToggleBtn.addEventListener('click', () => {
      const isDark = document.body.classList.contains('dark');
      applyTheme(isDark ? 'light' : 'dark');
    });

    // Відновлення теми зі сховища
    const savedTheme = localStorage.getItem('theme') || 'light';
    applyTheme(savedTheme);

    // Початковий рендер
    renderTable();

  })();
</script>
</body>
</html>