<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Автосервіс Онлайн</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fff; color:#000;}
  header {background:#000; color:#fff; padding:1rem; text-align:center; font-weight:bold; font-size:1.5rem;}
  nav {display:flex; background:#eee;}
  nav button {
    flex:1; padding:1rem; border:none; background:#ddd; cursor:pointer; font-weight:bold; font-size:1rem;
  }
  nav button.active { background:#000; color:#fff; }
  main {padding:1rem; max-width:700px; margin:auto;}
  section {display:none;}
  section.active {display:block;}
  form {margin-bottom:1rem;}
  input, select, textarea {
    width: 100%; padding:0.5rem; margin-bottom:0.5rem; box-sizing:border-box;
  }
  button.submit {
    background:#000; color:#fff; border:none; padding:0.7rem; width:100%; cursor:pointer;
  }
  button.submit:hover { background:#333;}
  table {width:100%; border-collapse:collapse; margin-top:1rem;}
  th, td {border:1px solid #ccc; padding:0.5rem; text-align:left;}
  button.delete {
    background:#e74c3c; border:none; color:#fff; cursor:pointer; padding:0.3rem 0.5rem; border-radius:3px;
  }
  button.delete:hover { background:#c0392b;}
</style>
</head>
<body>

<header>Автосервіс Онлайн</header>

<nav>
  <button class="tab active" data-tab="clients">Клієнти</button>
  <button class="tab" data-tab="cars">Автомобілі</button>
  <button class="tab" data-tab="parts">Запчастини</button>
  <button class="tab" data-tab="invoices">Рахунки</button>
</nav>

<main>
  <section id="clients" class="active">
    <h2>Клієнти</h2>
    <form id="clientForm">
      <input type="text" id="clientName" placeholder="Ім'я клієнта" required />
      <input type="tel" id="clientPhone" placeholder="Телефон" />
      <button class="submit" type="submit">Додати клієнта</button>
    </form>
    <table>
      <thead><tr><th>Ім'я</th><th>Телефон</th><th>Видалити</th></tr></thead>
      <tbody id="clientList"></tbody>
    </table>
  </section>

  <section id="cars">
    <h2>Автомобілі</h2>
    <form id="carForm">
      <input type="text" id="carOwner" placeholder="Власник (ім'я клієнта)" required />
      <input type="text" id="carModel" placeholder="Модель автомобіля" required />
      <input type="text" id="carVIN" placeholder="VIN (необов’язково)" />
      <button class="submit" type="submit">Додати автомобіль</button>
    </form>
    <table>
      <thead><tr><th>Власник</th><th>Модель</th><th>VIN</th><th>Видалити</th></tr></thead>
      <tbody id="carList"></tbody>
    </table>
  </section>

  <section id="parts">
    <h2>Запчастини</h2>
    <form id="partForm">
      <input type="text" id="partName" placeholder="Назва запчастини" required />
      <input type="number" id="partPrice" placeholder="Ціна" min="0" step="0.01" required />
      <button class="submit" type="submit">Додати запчастину</button>
    </form>
    <table>
      <thead><tr><th>Назва</th><th>Ціна</th><th>Видалити</th></tr></thead>
      <tbody id="partList"></tbody>
    </table>
  </section>

  <section id="invoices">
    <h2>Рахунки</h2>
    <p>Це буде пізніше :)</p>
  </section>
</main>

<script>
  // Вкладки
  const tabs = document.querySelectorAll('nav button.tab');
  const sections = document.querySelectorAll('main section');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      sections.forEach(s => s.classList.remove('active'));
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });

  // Дані у localStorage
  let clients = JSON.parse(localStorage.getItem('clients') || '[]');
  let cars = JSON.parse(localStorage.getItem('cars') || '[]');
  let parts = JSON.parse(localStorage.getItem('parts') || '[]');

  // Функції відмалювання
  function renderClients() {
    const tbody = document.getElementById('clientList');
    tbody.innerHTML = '';
    clients.forEach((c, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${c.name}</td><td>${c.phone || ''}</td><td><button class="delete" data-index="${i}">×</button></td>`;
      tbody.appendChild(tr);
    });
    // Кнопки видалення
    tbody.querySelectorAll('button.delete').forEach(btn => {
      btn.onclick = e => {
        clients.splice(e.target.dataset.index,1);
        saveClients();
        renderClients();
      }
    });
  }
  function renderCars() {
    const tbody = document.getElementById('carList');
    tbody.innerHTML = '';
    cars.forEach((c,i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${c.owner}</td><td>${c.model}</td><td>${c.vin || ''}</td><td><button class="delete" data-index="${i}">×</button></td>`;
      tbody.appendChild(tr);
    });
    tbody.querySelectorAll('button.delete').forEach(btn => {
      btn.onclick = e => {
        cars.splice(e.target.dataset.index,1);
        saveCars();
        renderCars();
      }
    });
  }
  function renderParts() {
    const tbody = document.getElementById('partList');
    tbody.innerHTML = '';
    parts.forEach((p,i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${p.name}</td><td>${p.price.toFixed(2)}</td><td><button class="delete" data-index="${i}">×</button></td>`;
      tbody.appendChild(tr);
    });
    tbody.querySelectorAll('button.delete').forEach(btn => {
      btn.onclick = e => {
        parts.splice(e.target.dataset.index,1);
        saveParts();
        renderParts();
      }
    });
  }

  // Збереження в localStorage
  function saveClients() {
    localStorage.setItem('clients', JSON.stringify(clients));
  }
  function saveCars() {
    localStorage.setItem('cars', JSON.stringify(cars));
  }
  function saveParts() {
    localStorage.setItem('parts', JSON.stringify(parts));
  }

  // Обробка форм
  document.getElementById('clientForm').addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('clientName').value.trim();
    if(!name) return alert('Введіть ім\'я клієнта');
    const phone = document.getElementById('clientPhone').value.trim();
    clients.push({name, phone});
    saveClients();
    renderClients();
    e.target.reset();
  });

  document.getElementById('carForm').addEventListener('submit', e => {
    e.preventDefault();
    const owner = document.getElementById('carOwner').value.trim();
    const model = document.getElementById('carModel').value.trim();
    const vin = document.getElementById('carVIN').value.trim();
    if(!owner || !model) return alert('Введіть власника і модель авто');
    cars.push({owner, model, vin});
    saveCars();
    renderCars();
    e.target.reset();
  });

  document.getElementById('partForm').addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('partName').value.trim();
    const price = parseFloat(document.getElementById('partPrice').value);
    if(!name || isNaN(price)) return alert('Введіть коректні назву і ціну');
    parts.push({name, price});
    saveParts();
    renderParts();
    e.target.reset();
  });

  // Початковий рендер
  renderClients();
  renderCars();
  renderParts();

</script>

</body>
</html>
